@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=yes">
    <title>彩链-兑换</title>
    <meta name="keywords" content="彩链">
    <meta name="description" content="彩链">
    <meta name="author" content="彩链">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
</head>
<body>
    <div class="default-header-nav">
        <span>
            <a href="/Member/Index">
                <img src="/images/icon/icon-26.png" />
            </a>
        </span> 兑换
    </div>
    @using (Html.BeginForm("ToAPP", "Shop", FormMethod.Get))
    {
        <div class="withdrawal exchange">
            <div class="withdrawal-content">
                <div class="withdrawal-operation">
                    <div class="withdrawal-operation-input">
                        <span class="withdrawal-operation-tag">兑换积分</span>
                        <input type="text" placeholder="最少100起提" id="Integral" name="Integral" onkeyup="value=value.replace(/[^\d]/g,'');" />
                    </div>
                    <div class="withdrawal-operation-input" style="display:none;">
                        <span class="withdrawal-operation-tag">兑换币种</span>
                        <select class="form-control" name="TB" placeholder="选择兑换币种">
                            <option value="1" selected>BCCB</option>
                            <option value="2">FBCC</option>
                        </select>
                    </div>
                </div>
                <div class="withdrawal-text">
                    <span>你当前可提积分为=@ViewBag.Integral</span>
                </div>
                <div class="withdrawal-btn">
                    <input type="text" name="Type" value="@Request.QueryString["Type"]" hidden />
                    <button type="button" id="btn" class="btn-block btn-green" onclick="return check();">兑换</button>
                </div>
            </div>
        </div>
    }
    <script src="~/js/jquery.js"></script>
    <script src="~/plugins/mlayer/layer.js"></script>
    <script>
    function check() {
        var field = $("input[name='Integral']");
        if (field.val()>@ViewBag.Integral) {
            tip("可提积分不足");
            return false;
        }
        if (field.val()<100) {
            tip("最少100起提");
            return false;
        }
        document.getElementById("btn").innerText = "正在提交...";
        document.getElementById("btn").disabled = true;
        document.getElementById("btn").style.display = "none";
        document.forms[0].submit();
    }
    function tooltip(field) {
        field.focus();
        tip(field.attr('placeholder'));
    }
    function tip(msg) {
        layer.open({
            content: msg
            , skin: 'msg'
            , time: 2
        });
    }
    </script>
</body>
</html>